---
layout: post
title:  "技术面试"
date:   2016-04-21 15:46:12
categories: test
---

### 什么是C++的**虚函数**？  
为实现多态性，在某基类中声明为virtual并在一个或多个派生类中被重新定义的成员函数。  
纯虚函数在基类中是没有定义的，必须在子类中加以实现，类似于java中的接口函数！

### 什么是**虚拟继承**？  
使得派生类如果继承基类多次，但只有一份基类的拷贝在派生类对象中。

### sizeof()函数是干嘛的？  
sizeof是C语言的一种**单目操作符！不是函数！**以字节形式给出了其操作数的存储大小。  
操作数可以是一个表达式或类型名。操作数的存储大小由操作数的类型决定。　
	
### C++中new和malloc的区别是什么？  
1.new是C的**关键词**，malloc是libc里的一个**函数**。  
2.new返回指定类型的**指针**，并且可以自动计算所需要大小；  
malloc必须要由我们计算字节数，返回的是**void* 类型**，需要强行转换为实际类型的指针。
{% highlight C++ %} 
int *p;p = new int; //返回类型为int* 类型(整数型指针)，分配大小为 sizeof(int)
int* parr;parr = new int [100]; //返回类型为 int* 类型(整数型指针)，分配大小为 sizeof(int) * 100
int* p = (int *) malloc (1);代码也能通过编译，但事实上只分配了1个字节大小的内存空间，当你往里头存入一个整数，就会有3个字节无家可归，而直接“住进邻居家”！造成的结果是后面的内存中原有数据内容被改写。
int* p;p = (int *) malloc (sizeof(int)*128);//分配128个（可根据实际需要替换该数值）整型存储单元，并将这128个连续的整型存储单元的首地址存储到指针变量p中
double *pd=(double *) malloc (sizeof(double)*12);//分配12个double型存储单元，并将首地址存储到指针变量pd中
{% endhighlight %}
3.malloc 函数实参为 sizeof(int)，返回的是void * 类型，函数用于指明一个整型数据需要的大小；new 返回指定类型的指针。
4.malloc 函数从**堆**里面获得空间。栈是线程独有的。栈是由编译器自动分配释放，存放函数的参数值、局部变量的值等。堆一般由程序员分配释放，若不释放，程序结束时可能由OS回收。
5.malloc 只管分配内存，并**不能**对所得的内存进行**初始化**。

### C++中delete和free有什么区别？  
结果类似于上题！

### 有问题反馈
在使用中有任何问题，欢迎反馈给我！
